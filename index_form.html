<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8" />
    <title>Forms</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1>Forms</h1>
    <div>
      Your email is <span id="submitted-email">jane@doe.com</span>
      <br />
      Your preferred even number is <span id="submitted-number"> </span>
      <br />
      The selected odd numbers are
      <span id="submitted-odd-number">1, 2, 3, and 4</span>
      <br />
      This is your story: <span id="submitted-story">This</span>
      <br />
      You are
      <span id="submitted-gender">female</span>
    </div>
    <form class="container" id="test-form">
      <div class="form-group">
        <label for="email">Email address</label>
        <input
          id="email"
          class="form-control"
          placeholder="name@example.com"
          type="email"
          name="email"
          required
        />
      </div>
      <div class="form-group">
        <label for="even-number">Select an even number</label>
        <select
          name="even-number"
          id="even-number"
          class="form-control"
          required
        >
          <option selected disabled>Please select a number</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
        </select>
      </div>
      <div class="form-group">
        <label for="odd-number">Select all odd numbers</label>
        <select
          name="odd-number"
          id="odd-number"
          class="form-control"
          multiple
          required
        >
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
        </select>
      </div>
      <div class="form-group">
        <label for="story">Write your story (30 characters max)</label>
        <textarea
          name="story"
          id="story"
          class="form-control"
          rows="3"
          required
          maxlength="30"
        ></textarea>
      </div>
      <div class="form-check">
        <input
          name="terms"
          id="terms"
          class="form-check-input"
          type="checkbox"
          required
        />
        <label for="terms" class="form-check-label">
          Do you agree to our terms of service
        </label>
      </div>
      Gender
      <div class="form-check">
        <input
          id="gender-female"
          class="form-check-input"
          type="radio"
          name="gender"
          value="female"
          required
        />
        <label class="form-check-label" for="gender-female"> Female </label>
      </div>
      <div class="form-check">
        <input
          id="gender-male"
          class="form-check-input"
          type="radio"
          name="gender"
          value="male"
          required
        />
        <label class="form-check-label" for="gender-male"> Male </label>
      </div>
      <button type="submit">Submit</button>
    </form>
    <script>
      function readQueryParams() {
        const emaill = document.getElementById("submitted-email");
        const story = document.getElementById("submitted-story");
        const even_num = document.getElementById("submitted-number");
        const odd_num = document.getElementById("submitted-odd-number");

        const search = new URLSearchParams(window.location.search);

        const userEmail = search.get("email");
        const userStory = search.get("story");
        const even = search.get("even-number");
        const odd = search.getAll("odd-number");

        const len = odd.length;
        var myStr = odd.join(",");
        console.log(myStr.substring(0, len - 2));
        var str = "";
        for (i = 1; i < len; i++) {
          if (i == len - 1) str += " and " + odd[i];
          else str += ", " + odd[i];
        }

        console.log("Somethig", odd);

        email.textContent = userEmail;
        story.textContent = userStory;
        even_num.textContent = even;
        odd_num.textContent = odd[0] + str;
      }

      window.addEventListener("load", readQueryParams);
    </script>
  </body>
</html>
